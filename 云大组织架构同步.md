# 身份中台API

我们身份中台的api，我封装成一个sdk https://pypi.org/project/cqhyxk/ ，可以根据 user_id 查询⼈员身份信息  /open-api/member/identity/page， ⼈员标签关系  /open-api/tag/member-tags/page 

```
# cqhyxk API Configuration
CQHYXK_BASEURL=https://your-idc-host.com/backend/school-platform/openapi
CQHYXK_APP_KEY=your_app_key_here
CQHYXK_APP_SECRET=your_app_secret_here

# Optional configurations for examples
SAMPLE_USER_ID=your_sample_user_id
CALLBACK_URL=https://your-callback-url.com/webhook
```

```
这个是身份中台的相关配置信息，cqhyxk 包

"""
Example usage of the cqhyxk SDK
"""
import os
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

# Replace 'SAMPLE_USER_ID' with an actual user ID to test this function
sample_user_id = os.getenv('SAMPLE_USER_ID', 'SAMPLE_USER_ID')

from cqhyxk import CqhyxkClient
from cqhyxk.models import IdentityPageRequest, SubscriptionRequest, MemberTagPageRequest

def main():
    """
    Example demonstrating how to use the cqhyxk SDK
    """
    # Initialize the client - credentials will be loaded from environment variables
    # Make sure to set CQHYXK_BASEURL, CQHYXK_APP_KEY, and CQHYXK_APP_SECRET in your .env file
    client = CqhyxkClient()
    
    print("cqhyxk SDK Example")
    print("=" * 30)
    
    # Example 1: Get identity list (first 10 records)
    print("\n1. Getting identity list...")
    try:
        request = IdentityPageRequest(current=0, size=10, sourceUserId=sample_user_id)
        response = client.get_identity_list(request)
        print(f"Retrieved {len(response.data.content) if response.data and response.data.content else 0} identities")
        print(f"Content: {response.data.content if response.data and response.data.content else 'N/A'}")
    except Exception as e:
        print(f"Error getting identity list: {str(e).encode('utf-8', errors='ignore').decode('utf-8')}")
```

