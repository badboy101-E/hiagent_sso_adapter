# 环境变量配置说明

## 已配置的环境变量

环境变量文件已创建：`.env`

### 身份中台API配置

```bash
CQHYXK_BASEURL=https://your-idc-host.com/backend/school-platform/openapi
CQHYXK_APP_KEY=your_app_key_here
CQHYXK_APP_SECRET=your_app_secret_here
```

### 数据库配置

```bash
TMP_DB_HOST=your_db_host
TMP_DB_PORT=5432
TMP_DB_NAME=postgres
TMP_DB_USER=your_db_user
TMP_DB_PASSWORD=your_db_password
```

### 其他配置

```bash
# 测试用户ID（可选）
SAMPLE_USER_ID=your_sample_user_id

# 用户ID列表（可选，如果需要批量查询特定用户）
USER_ID_LIST=

# 租户ID（必须修改为实际值）
TENANT_ID=your_tenant_id
```

## 使用方法

### 方式1：使用脚本创建

```bash
./create_env.sh
```

### 方式2：手动创建

```bash
cp env.example .env
```

### 方式3：直接编辑

如果 `.env` 文件已存在，直接编辑即可：

```bash
vi .env
# 或
nano .env
```

## 重要提醒

1. **租户ID**: 必须将 `TENANT_ID=your_tenant_id` 修改为从HiAgent环境获取的实际租户ID
2. **文件安全**: `.env` 文件包含敏感信息，不要提交到版本控制系统
3. **环境变量加载**: 脚本会自动使用 `python-dotenv` 加载 `.env` 文件中的环境变量

## 验证配置

运行测试脚本验证配置是否正确：

```bash
python test_db_connection.py
```

如果配置正确，会显示：
```
✓ 数据库连接成功！
✓ tmp_user - 存在
✓ tmp_organization - 存在
✓ tmp_org_user_relation - 存在
```

## 环境变量说明

| 变量名 | 说明 | 是否必填 |
|--------|------|----------|
| CQHYXK_BASEURL | 身份中台API基础地址 | 是 |
| CQHYXK_APP_KEY | 身份中台应用Key | 是 |
| CQHYXK_APP_SECRET | 身份中台应用Secret | 是 |
| TENANT_ID | 租户ID（从HiAgent获取） | 是 |
| TMP_DB_HOST | 临时数据库主机 | 是 |
| TMP_DB_PORT | 临时数据库端口 | 是 |
| TMP_DB_NAME | 临时数据库名称 | 是 |
| TMP_DB_USER | 临时数据库用户名 | 是 |
| TMP_DB_PASSWORD | 临时数据库密码 | 是 |
| SAMPLE_USER_ID | 测试用户ID | 否 |
| USER_ID_LIST | 用户ID列表（逗号分隔） | 否 |

